# Space åŠŸèƒ½è¦æ ¼èˆ‡æµç¨‹åœ–

## ğŸ“‹ åŠŸèƒ½æ¸…å–®

### Phase 1: Space åŸºç¤ (Core)
| # | åŠŸèƒ½ | é é¢/çµ„ä»¶ | å„ªå…ˆç´š |
|---|------|----------|--------|
| 1.1 | Space åˆ—è¡¨ | `/spaces/index.vue` | P0 |
| 1.2 | å‰µå»º Space | `/spaces/new.vue` (modal) | P0 |
| 1.3 | ç·¨è¼¯ Space è¨­å®š | `/spaces/[id]/settings.vue` | P0 |
| 1.4 | åˆªé™¤/æ­¸æª” Space | API + ç¢ºèªå°è©±æ¡† | P0 |
| 1.5 | åˆ‡æ›ç•¶å‰ Space | Sidebar + Composable | P0 |

### Phase 2: Space æˆå“¡ (Members)
| # | åŠŸèƒ½ | é é¢/çµ„ä»¶ | å„ªå…ˆç´š |
|---|------|----------|--------|
| 2.1 | æˆå“¡åˆ—è¡¨ | `/spaces/[id]/members.vue` | P0 |
| 2.2 | é‚€è«‹æˆå“¡ (email/role) | Modal | P0 |
| 2.3 | ä¿®æ”¹æˆå“¡è§’è‰² | Dropdown | P1 |
| 2.4 | ç§»é™¤æˆå“¡ | ç¢ºèªå°è©±æ¡† | P1 |

### Phase 3: Space Items - Folder
| # | åŠŸèƒ½ | é é¢/çµ„ä»¶ | å„ªå…ˆç´š |
|---|------|----------|--------|
| 3.1 | Folder æ¨¹ç‹€å°èˆª | Sidebar çµ„ä»¶ | P0 |
| 3.2 | å‰µå»º Folder | Context menu + Modal | P0 |
| 3.3 | ç·¨è¼¯ Folder (rename/icon) | Inline/Modal | P1 |
| 3.4 | ç§»å‹• Folder (drag & drop) | DnD å¯¦ç¾ | P2 |
| 3.5 | åˆªé™¤ Folder | ç¢ºèªå°è©±æ¡† | P1 |

### Phase 4: Space Items - Table
| # | åŠŸèƒ½ | é é¢/çµ„ä»¶ | å„ªå…ˆç´š |
|---|------|----------|--------|
| 4.1 | å‰µå»º Table (é¸ Schema) | Modal | P0 |
| 4.2 | Table ç¶²æ ¼è¦–åœ– | `/spaces/[id]/tables/[tableId].vue` | P0 |
| 4.3 | Table è¡¨å–®è¦–åœ– (å–®ç­†) | Drawer/Modal | P1 |
| 4.4 | æ¬„ä½æ’åº/éš±è— | Toolbar | P1 |
| 4.5 | éæ¿¾å™¨ UI | Filter bar | P1 |
| 4.6 | æ’åº UI | Sort dropdown | P1 |

### Phase 5: Space Items - View
| # | åŠŸèƒ½ | é é¢/çµ„ä»¶ | å„ªå…ˆç´š |
|---|------|----------|--------|
| 5.1 | å‰µå»º View (åŸºæ–¼ Table) | Modal | P1 |
| 5.2 | View é…ç½® (filter/sort/columns) | å´é‚Šé¢æ¿ | P1 |
| 5.3 | ä¿å­˜ View | Auto-save | P1 |

### Phase 6: Space Items - Dashboard
| # | åŠŸèƒ½ | é é¢/çµ„ä»¶ | å„ªå…ˆç´š |
|---|------|----------|--------|
| 6.1 | å‰µå»º Dashboard | Modal | P2 |
| 6.2 | æ·»åŠ  Widget (Table/View/Chart) | Widget picker | P2 |
| 6.3 | Dashboard ä½ˆå±€ç·¨è¼¯ | Grid layout | P2 |
| 6.4 | Widget é…ç½® | å´é‚Šé¢æ¿ | P2 |

### Phase 7: æ¬Šé™ç®¡ç† (Permissions)
| # | åŠŸèƒ½ | é é¢/çµ„ä»¶ | å„ªå…ˆç´š |
|---|------|----------|--------|
| 7.1 | Item æ¬Šé™è¨­ç½® | `/spaces/[id]/items/[itemId]/permissions.vue` | P2 |
| 7.2 | ç¹¼æ‰¿/è‡ªå®šç¾©æ¬Šé™åˆ‡æ› | Toggle | P2 |
| 7.3 | æ·»åŠ ç‰¹å®šç”¨æˆ¶æ¬Šé™ | User picker + Role | P2 |

---

## ğŸ”„ æ ¸å¿ƒæµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ¶é€²å…¥ Space                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æª¢æŸ¥ Space Membership                                          â”‚
â”‚  â”œâ”€ æ˜¯æˆå“¡ï¼Ÿâ†’ ç¹¼çºŒ                                              â”‚
â”‚  â””â”€ å¦ï¼Ÿâ†’ é¡¯ç¤º "ç„¡æ¬Šé™" æˆ– "ç”³è«‹åŠ å…¥"                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¼‰å…¥ Space Items (Electric Sync)                               â”‚
â”‚  â”œâ”€ API éæ¿¾: åªè¿”å›ç”¨æˆ¶æœ‰æ¬Šé™çš„ item IDs                        â”‚
â”‚  â””â”€ Electric Shape: WHERE id IN (allowed_ids)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     é¡¯ç¤º Folder æ¨¹ç‹€çµæ§‹                          â”‚
â”‚  â”œâ”€ éæ­¸æ§‹å»ºæ¨¹ (parent_id)                                      â”‚
â”‚  â””â”€ æ ¹ç¯€é»: parent_id IS NULL                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼               â–¼               â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Folder  â”‚     â”‚ Table   â”‚     â”‚ View/   â”‚
       â”‚ é»æ“Š    â”‚     â”‚ é»æ“Š    â”‚     â”‚ Dashboardâ”‚
       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
            â”‚               â”‚               â”‚
            â–¼               â–¼               â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚å±•é–‹/æ”¶èµ·â”‚     â”‚è¼‰å…¥ Tableâ”‚     â”‚è¼‰å…¥é…ç½®  â”‚
       â”‚å­ Items â”‚     â”‚æ•¸æ“š     â”‚     â”‚æ¸²æŸ“ Widgetâ”‚
       â”‚         â”‚     â”‚(ç¶²æ ¼è¦–åœ–)â”‚     â”‚         â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ é é¢çµæ§‹

```
/spaces
â”œâ”€â”€ index.vue                 # Space åˆ—è¡¨
â”œâ”€â”€ new.vue                   # å‰µå»º Space
â”œâ”€â”€ [id]
â”‚   â”œâ”€â”€ index.vue             # Space é¦–é  (é è¨­å„€è¡¨æ¿/ç¬¬ä¸€å€‹ item)
â”‚   â”œâ”€â”€ settings.vue          # Space è¨­å®š
â”‚   â”œâ”€â”€ members.vue           # æˆå“¡ç®¡ç†
â”‚   â”œâ”€â”€ items                 # Items è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ [itemId]
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue     # Item è©³æƒ…
â”‚   â”‚   â”‚   â””â”€â”€ permissions.vue # æ¬Šé™è¨­å®š
â”‚   â””â”€â”€ tables
â”‚       â””â”€â”€ [tableId].vue     # Table è¦–åœ–
```

---

## ğŸ”§ Composables æ¶æ§‹

```
useSpaces()           # Space åˆ—è¡¨ + ç•¶å‰ Space
useSpaceItems()       # Items æ¨¹ç‹€æ“ä½œ
useSpaceMembers()     # æˆå“¡ç®¡ç†
useSpacePermissions() # æ¬Šé™æª¢æŸ¥
useTableView()        # Table æ¸²æŸ“é‚è¼¯
```

---

## âš¡ Electric Sync ç¯„åœ

| è¡¨ | åŒæ­¥ç¯„åœ | èªªæ˜ |
|---|---------|------|
| spaces | company_id = current | ç”¨æˆ¶æ‰€å±¬å…¬å¸çš„æ‰€æœ‰ Space |
| space_members | space_id IN (ç”¨æˆ¶çš„ spaces) | Space æˆå“¡åˆ—è¡¨ |
| space_items | space_id IN (ç”¨æˆ¶çš„ spaces) + æ¬Šé™éæ¿¾ | ç”¨æˆ¶å¯è¦‹çš„ items |
| space_item_permissions | item_id IN (ç”¨æˆ¶çš„ items) | Item æ¬Šé™é…ç½® |

---

## ğŸ¯ é–‹ç™¼é †åºå»ºè­°

```
Week 1: Phase 1 (Space åŸºç¤) + Phase 2 (Members)
Week 2: Phase 3 (Folder) + 4.1-4.3 (Table åŸºç¤)
Week 3: Phase 4 å®Œæˆ (Table é€²éšåŠŸèƒ½)
Week 4: Phase 5 (View) + Phase 6 (Dashboard)
Week 5: Phase 7 (æ¬Šé™) + æ¸¬è©¦å„ªåŒ–
```
